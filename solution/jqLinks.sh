echo "id,ip,r_id,r_ip,weight" ; cat routes.txt | jq -c '.[][] | select( .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."ls-nlri-type" == 2 )' | jq '. | {localASN: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."local-node-descriptors"."autonomous-system",localRouterID: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."local-node-descriptors"."router-id",intAddress: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."interface-address"."interface-address",remoteASN: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."remote-node-descriptors"."autonomous-system",remoteRouterID: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."remote-node-descriptors"."router-id",neighAddress: .neighbor.message.update.announce."bgp-ls bgp-ls"."20.0.0.1"[0]."neighbor-address"."neighbor-address",igpMetric: .neighbor.message.update.attribute."bgp-ls"."igp-metric"}'|  jq -s 'unique_by(.intAddress)'| jq -r .'[]  | [.localRouterID,.intAddress,.remoteRouterID,.neighAddress,(.igpMetric|tostring)] |  @csv '| sed 's/"//g'
